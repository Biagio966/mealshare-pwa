<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MealShare Lite</title>
   
    <link rel="apple-touch-icon" href="public/IMG_1849.png">

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: #f5f7f6;
    margin: 0;
    padding: 20px;
  }

  h1 {
    text-align: center;
    color: #2e7d32;
    margin-bottom: 20px;
  }

  .box {
    background: white;
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  }

  input, textarea {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: 1px solid #ccc;
  }

  button {
    width: 100%;
    margin-top: 15px;
    padding: 14px;
    font-size: 16px;
    background: #2ecc71;
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: bold;
  }

  button:active {
    opacity: 0.8;
  }

  .meal-card {
    background: #f9f9f9;
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 10px;
  }

  a {
    color: #2e7d32;
    font-weight: bold;
    text-decoration: none;
  }
</style>

    
</head>

<body>
    <h1>MealShare â€“ Versione Semplice</h1>
    <label style="font-size:14px;">
  <input type="checkbox" id="accept">
  Accetto <a href="legal.html" target="_blank">Avviso legale e Privacy</a>
</label>

<br><br>


    <div class="box">
        <h3>Crea un pasto</h3>
        <input id="mealName" placeholder="Nome del pasto">
        <input id="mealCost" placeholder="Costo totale (es. 12.50)">
        <textarea id="mealDesc" placeholder="Descrizione..."></textarea>
        <button onclick="checkAndSave()">Salva</button>


    <div class="box">
        <h3>Pasti salvati</h3>
        <div id="mealsList">Nessun pasto ancora.</div>
    </div>

    <script>
        function checkAndSave() {
  if (!document.getElementById("accept").checked) {
    alert("Devi accettare Avviso legale e Privacy");
    return;
  }
  saveMeal();
}

        function acceptLegal() {
  localStorage.setItem("legalAccepted", "yes");
  document.getElementById("legalBanner").style.display = "none";
}

window.onload = function () {
  if (!localStorage.getItem("legalAccepted")) {
    document.getElementById("legalBanner").style.display = "block";
  }
};

        <script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const SUPABASE_URL = "https://zboefxtsggvkbinxlyux.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpib2VmeHRzZ2d2a2JpbnhseXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2NzMzNjQsImV4cCI6MjA4MTI0OTM2NH0.5uQaO-cKGxrdSiZPvjmqZE3jdYo0qo2uDdGUvrpQqEM";

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function saveMeal() {
    const name = document.getElementById("mealName").value;
    const cost = document.getElementById("mealCost").value;
    const desc = document.getElementById("mealDesc").value;

    if (!name || !cost) {
        alert("Inserisci almeno nome e costo!");
        return;
    }

    const { error } = await supabase
        .from("meals")
        .insert([{ name, cost, description: desc }]);

    if (error) {
        alert("Errore: " + error.message);
    } else {
        alert("Pasto salvato ðŸŽ‰");
        loadMeals();
    }
}

async function loadMeals() {
    const { data, error } = await supabase
        .from("meals")
        .select("*")
        .order("created_at", { ascending: false });

    const list = document.getElementById("mealsList");

    if (error) {
        list.innerHTML = "Errore nel caricamento";
        return;
    }

    if (data.length === 0) {
        list.innerHTML = "Nessun pasto ancora.";
        return;
    }

    list.innerHTML = data.map(m =>
        `<p><strong>${m.name}</strong> â€“ â‚¬${m.cost}<br>${m.description || ""}</p>`
    ).join("");
}

window.saveMeal = saveMeal;
loadMeals();
</script>

<hr>

<div style="font-size: 12px; color: #555;">
  <h3>Avviso legale</h3>
  <p>
    Gnammi Ã¨ una piattaforma informativa che consente agli utenti di condividere
    pasti fatti in casa e di ripartire esclusivamente i costi delle spese sostenute.
  </p>
  <p>
    Gnammi non Ã¨ un servizio di ristorazione, non vende cibo e non svolge attivitÃ  commerciale.
    Gli utenti sono gli unici responsabili della preparazione e distribuzione dei pasti.
  </p>
  <p>
    Lâ€™utilizzo dellâ€™app implica lâ€™accettazione di questo avviso.
  </p>
</div>

</body> <div id="legalBanner" style="
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #f2f2f2;
  padding: 15px;
  font-size: 14px;
  border-top: 1px solid #ccc;
  display: none;
">
  Usando Gnammi accetti
  <a href="legal.html" target="_blank">Avviso legale e Privacy</a>.
  <br><br>
  <button onclick="acceptLegal()">Accetto</button>
</div>

</html>
